<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>微博留言板</title>
    <style>
        *{marin:0;padding:0;}
        ul{width:200px;height:250px;border:1px solid #000;overflow: hidden;}
        ul li{list-style: none;border-bottom: 1px dashed #ccc;padding:4px;overflow: hidden;}
    </style>
    <script src="move2.js"></script>
    <script>
        window.onload = function () {
            var oTxt = document.getElementById("txt1");
            var oBtn = document.getElementById("btn");
            var oUl = document.getElementsByTagName("ul")[0];
            oBtn.onclick = function () {
                var oLi = document.createElement("li");
                oLi.innerHTML = oTxt.value;
                oTxt.value = "";

                if(oUl.children.length>0){
                    oUl.insertBefore(oLi,oUl.children[0]);
                }
                else{
                    oUl.appendChild(oLi);
                }

                var iHeight = oLi.offsetHeight;
                oLi.style.height = "0";
                move(oLi,{height:iHeight},function(){
                    move(oLi,{opacity:100});
                })
            };
            oTxt.onkeydown = function(ev){
                var ev = ev || event;

                if(ev.keyCode == 13 && ev.ctrlKey){
                    var oLi = document.createElement("li");

                    oLi.innerHTML = oTxt.value;
                    oTxt.value = "";

                    if(oUl.children.length>0){
                        oUl.insertBefore(oLi,oUl.children[0]);
                    }
                    else{
                        oUl.appendChild(oLi);
                    }

                    var iHeight = oLi.offsetHeight;
                    oLi.style.height = "0";
                    move(oLi,{height:iHeight},function(){
                        move(oLi,{opacity:100});
                    })
                }
            }
        }
    </script>
</head>
<body>
    <ul>
    </ul>
    <textarea id="txt1" cols="30" rows="5"></textarea>
    <input type="button" value="发布" id="btn">
</body>
</html>
